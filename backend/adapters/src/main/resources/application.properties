# ========================
# Quarkus HTTP
# ========================
quarkus.http.port=8080

# ========================
# Keycloak / OIDC Config
# ========================
#quarkus.oidc.auth-server-url=http://unifor-keycloak:8080/realms/unifor
#quarkus.oidc.client-id=unifor-frontend
#quarkus.oidc.credentials.secret=unifor-secret
#quarkus.oidc.application-type=service
#quarkus.oidc.tenant-enabled=true
#quarkus.oidc.enabled=true
#quarkus.oidc.token-path=/protocol/openid-connect/token
quarkus.oidc.token.allow-refresh=true
quarkus.oidc.token-state-manager.split-tokens=true
#quarkus.http.auth.proactive=false

# ========================
# ? CONFIGURAÇÃO PARA PRODUÇÃO (Docker)
# ========================
quarkus.oidc.auth-server-url=http://unifor-keycloak:8080/realms/unifor
quarkus.oidc.client-id=unifor-frontend
quarkus.oidc.credentials.secret=unifor-secret
quarkus.oidc.application-type=service
quarkus.oidc.tenant-enabled=true
quarkus.oidc.enabled=true
quarkus.oidc.token-path=/protocol/openid-connect/token
quarkus.http.auth.proactive=false

## Libera rotas públicas (Swagger, OpenAPI, Health)
#quarkus.http.auth.permission.public.paths=/q/swagger-ui/*,/swagger-ui/*,/q/openapi/*,/openapi/*,/q/health/*,/q/dev/*
#quarkus.http.auth.permission.public.policy=permit
#
## Protege as APIs
#quarkus.http.auth.permission.secured.paths=/api/*
#quarkus.http.auth.permission.secured.policy=authenticated

# ========================
# ?? CONFIGURAÇÃO PARA DESENVOLVIMENTO LOCAL
# ========================
%dev.quarkus.oidc.enabled=false
%dev.quarkus.oidc.tenant-enabled=false
%dev.quarkus.http.auth.permission.all.paths=/*
%dev.quarkus.http.auth.permission.all.policy=permit

%dev.quarkus.swagger-ui.always-include=true
%dev.quarkus.swagger-ui.path=/q/swagger-ui




# ========================
# Datasource (MySQL)
# ========================
quarkus.datasource.db-kind=mysql
quarkus.datasource.username=unifor_user
quarkus.datasource.password=unifor_pass
quarkus.datasource.jdbc.url=jdbc:mysql://unifor-mysql:3306/unifor_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
quarkus.hibernate-orm.database.generation=update

# ========================
# OpenAPI / Swagger
# ========================
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/q/swagger-ui
quarkus.smallrye-openapi.path=/q/openapi
quarkus.smallrye-openapi.enable=true

# Libera Swagger, OpenAPI, Health e Dev UI
quarkus.http.auth.permission.public.paths=/q/swagger-ui/*,/swagger-ui/*,/q/openapi/*,/openapi/*,/q/health/*,/q/dev/*
quarkus.http.auth.permission.public.policy=permit

# Protege apenas APIs reais
quarkus.http.auth.permission.secured.paths=/api/*
quarkus.http.auth.permission.secured.policy=authenticated


# ========================
# CORS
# ========================
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
